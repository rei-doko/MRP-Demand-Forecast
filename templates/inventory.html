{% extends "base.html" %}
{% block content %}
<h2>Inventory</h2>

<!-- Display message if exists -->
{% if message %}
    <div class="alert alert-info" id="msg-box">{{ message }}</div>
{% endif %}

<!-- Centralized Update Form -->
<form method="POST" action="{{ url_for('inventory') }}">
    <!-- Table for inventory -->
    <table class="table table-bordered">
        <thead>
            <tr>
                <th>Product ID</th>
                <th>Product Name</th>
                <th>Current Quantity</th>
                <th>
                    <!-- Button to update quantities -->
                    <button type="submit" class="btn btn-success btn-sm mt-1">Update</button>
                </th>
            </tr>
        </thead>
        <tbody>
            <!-- Loops through each item in inventory -->
            {% for item in inventory %}
            <tr>
                <td>{{ item['product_id'] }}</td>
                <td>{{ item['product_name'] }}</td>
                <td>{{ item['quantity'] }}</td>
                <td>
                    <input type="number" 
                           name="update_quantities[{{ item['product_id'] }}]" 
                           min="0" class="form-control" 
                           placeholder="Enter new value">
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
</form>

<script>
    // Auto-hide the message box after 5 seconds
    document.addEventListener("DOMContentLoaded", function() {
        const msgBox = document.getElementById("msg-box");
        if (msgBox) {
            setTimeout(() => {
                msgBox.style.display = "none";
            }, 5000);
        }
    });
</script>

{% endblock %}
